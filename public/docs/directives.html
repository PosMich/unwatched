<!DOCTYPE html>

<html>
<head>
  <title>Unwatched - Angular Directives</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="angular.html">
                angular.coffee
              </a>
            
              
              <a class="source" href="controllers.html">
                controllers.coffee
              </a>
            
              
              <a class="source" href="directives.html">
                directives.coffee
              </a>
            
              
              <a class="source" href="filters.html">
                filters.coffee
              </a>
            
              
              <a class="source" href="services.html">
                services.coffee
              </a>
            
              
              <a class="source" href="app.html">
                app.coffee
              </a>
            
              
              <a class="source" href="config.html">
                config.coffee
              </a>
            
              
              <a class="source" href="debug.html">
                debug.coffee
              </a>
            
              
              <a class="source" href="index.html">
                index.coffee
              </a>
            
              
              <a class="source" href="routes.api.html">
                routes.api.coffee
              </a>
            
              
              <a class="source" href="routes.html">
                routes.coffee
              </a>
            
              
              <a class="source" href="server.html">
                server.coffee
              </a>
            
              
              <a class="source" href="userconfig.html">
                userconfig.coffee
              </a>
            
              
              <a class="source" href="README.html">
                README.md
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="unwatched-angular-directives">Unwatched - Angular Directives</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-string">"use strict"</span>

app = angular.<span class="hljs-built_in">module</span> <span class="hljs-string">"unwatched.directives"</span>, []</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>inputMatch</h3><blockquote>
<p>Directive to validate wheter two inputs are equal <br/>
Frontend-usage: input(ng-input-match=”origin-input-field-id”)</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
app.directive <span class="hljs-string">"inputMatch"</span>, [<span class="hljs-function"> -&gt;</span>
  <span class="hljs-attribute">require</span>: <span class="hljs-string">"ngModel"</span>
  <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs, ctrl)</span> -&gt;</span>
    originInput = <span class="hljs-string">"#"</span> + attrs.inputMatch
    elem.add(originInput).<span class="hljs-literal">on</span> <span class="hljs-string">"input"</span>,<span class="hljs-function"> -&gt;</span>
      scope.$apply<span class="hljs-function"> -&gt;</span>
        v = elem.val() <span class="hljs-keyword">is</span> $(originInput).val()
        ctrl.$setValidity <span class="hljs-string">"inputMatch"</span>, v
        <span class="hljs-keyword">return</span>
      <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">return</span>
]</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>client</h3><blockquote>
<p>Loads the template for a single client (/partials/client.jade)
and adds a watcher to keep the dimensions 1:1 <br/>
Frontend-usage: div(client)</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
app.directive <span class="hljs-string">"client"</span>, [
  <span class="hljs-string">"$window"</span>
  <span class="hljs-function"><span class="hljs-params">($<span class="hljs-built_in">window</span>)</span> -&gt;</span>
    <span class="hljs-attribute">templateUrl</span>: <span class="hljs-string">"/partials/client.jade"</span>
    <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem)</span> -&gt;</span>
      w = angular.element($<span class="hljs-built_in">window</span>)
      elem.height elem.width()
      $(elem).find(<span class="hljs-string">".client-options span i"</span>).css(<span class="hljs-string">"line-height"</span>,
        (elem.width() / <span class="hljs-number">2</span>) + <span class="hljs-string">"px"</span>)
      w.bind <span class="hljs-string">"resize"</span>,<span class="hljs-function"> -&gt;</span>
        elem.height elem.width()
        $(elem).find(<span class="hljs-string">".client-options span i"</span>).css(<span class="hljs-string">"line-height"</span>,
          (elem.width() / <span class="hljs-number">2</span>) + <span class="hljs-string">"px"</span>)
        <span class="hljs-keyword">return</span>
      <span class="hljs-keyword">return</span>
]</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>UpdateScrollPosition</h3><blockquote>
<p>Scrolls the container view to the bottom if new child-elements appear<br/>
Frontend-usage: div(update-scroll-position=”containerElementId”)<br/>
Additional note: window.setTimeout-Workaround - the directives is triggered
by an update on the model. To get the right height of the container element
we need to wait 1ms until the view is up-to-date - this is just a workaround
and needs optimization</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.directive <span class="hljs-string">"updateScrollPosition"</span>, [<span class="hljs-function"> -&gt;</span>
  <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs)</span> -&gt;</span>
    scope.$watch attrs.updateScrollPosition,<span class="hljs-function"> -&gt;</span>
      <span class="hljs-built_in">window</span>.setTimeout( (<span class="hljs-function">-&gt;</span> $(elem).parent().scrollTop $(elem).height()), <span class="hljs-number">1</span> )
]</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>adjustWidth</h3><blockquote>
<p>Is used on the tab-directive. Similar to the attribute “justified”, but
sets a definite width on each tab. (value = containerWidth / n)<br/>
Adjusts width on init, on change of the given attr and on window resize<br/>
Frontend-usage: tabset(adjust-width=”attr”)<br/>
Additional note: window.setTimeout-Workaround, as mentioned above</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.directive <span class="hljs-string">"adjustWidth"</span>, [
  <span class="hljs-string">"$window"</span>
  <span class="hljs-function"><span class="hljs-params">($<span class="hljs-built_in">window</span>)</span> -&gt;</span>
    <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs)</span> -&gt;</span>

      <span class="hljs-function"><span class="hljs-title">adjustElementWidth</span> = <span class="hljs-params">(elem, attrs)</span> -&gt;</span>
        adjustedWidth = $(elem).find(<span class="hljs-string">"ul"</span>).width()
        elems = $(elem).find( <span class="hljs-string">"ul li"</span> ).length
        adjustedWidth = ((adjustedWidth / elems) - <span class="hljs-number">2</span>)  <span class="hljs-keyword">if</span> elems &gt; <span class="hljs-number">0</span>
        $(elem).find(<span class="hljs-string">"ul li a"</span>).css( <span class="hljs-string">"width"</span>,  adjustedWidth)
        <span class="hljs-keyword">return</span>

      scope.$watch attrs.adjustWidth,<span class="hljs-function"> -&gt;</span>
        <span class="hljs-built_in">window</span>.setTimeout( (<span class="hljs-function">-&gt;</span>
          adjustElementWidth(elem, attrs)
        ), <span class="hljs-number">1</span>)

      angular.element($<span class="hljs-built_in">window</span>).bind <span class="hljs-string">"resize"</span>,<span class="hljs-function"> -&gt;</span>
        adjustElementWidth(elem, attrs)
        <span class="hljs-keyword">return</span>
]</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>delayDisplay</h3><blockquote>
<p>Delays the display of a certain hidden element. Adds the “show” css-class,
after the element has been added to the view.<br/>
Frontend-usage: div(delay-display=”modelOfDelayedElement”)<br/>
Additional note: Atm it just works with opacity: 0 elements.</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.directive <span class="hljs-string">"delayDisplay"</span>, [<span class="hljs-function"> -&gt;</span>
  <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs)</span> -&gt;</span>
    scope.$watch attrs.delayDisplay,<span class="hljs-function"> -&gt;</span>
      $(elem).addClass <span class="hljs-string">"show"</span>
]</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <hr>
<ul>
<li><h3>focusOnClick</h3><blockquote>
<p>Sets the focus on a certain input field after a click event was fired.<br/>
Frontend-usage: a(focus-on-click=”fieldToBeFocusedId”)</p>
</blockquote>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.directive <span class="hljs-string">"focusOnClick"</span>, [<span class="hljs-function"> -&gt;</span>
  <span class="hljs-attribute">link</span>: <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs)</span> -&gt;</span>
    focusField = <span class="hljs-string">"#"</span> + attrs.focusOnClick
    elem.<span class="hljs-literal">on</span> <span class="hljs-string">"click"</span>,<span class="hljs-function"> -&gt;</span>
      $(focusField).focus()
      <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">return</span>
]

app.directive <span class="hljs-string">"appVersion"</span>, [
  <span class="hljs-string">"version"</span>
  <span class="hljs-function"><span class="hljs-params">(version)</span> -&gt;</span>
    <span class="hljs-function"><span class="hljs-params">(scope, elem, attrs)</span> -&gt;</span>
      elem.text version
]</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
